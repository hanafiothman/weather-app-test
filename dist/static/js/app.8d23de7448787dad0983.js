webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"navigation-bar"}},[n("nav",t._l(t.links,function(e){return n("router-link",{key:e.id,staticClass:"routerlink",attrs:{to:""+e.page}},[t._v(t._s(e.title)+"\n    ")])}),1)])},staticRenderFns:[]},a={name:"App",components:{NavigationBar:n("VU/8")({name:"NavigationBar",data:function(){return{links:[{id:0,title:"Home",page:"/home"}]}}},i,!1,null,null,null).exports}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("NavigationBar"),this._v(" "),e("router-view")],1)},staticRenderFns:[]},c=n("VU/8")(a,s,!1,null,null,null).exports,r=(n("Vp6e"),n("NYxO"));o.a.use(r.a);var l=new r.a.Store({state:{selectedLocation:[],selectedLocationInfo:[],recentLocations:[]},getters:{getSelectedLocation:function(){return l.state.selectedLocation},getSelectedLocationInfo:function(){return l.state.selectedLocationInfo},getRecentLocations:function(){return l.state.recentLocations}},mutations:{setSelectedLocation:function(t,e){t.selectedLocation=e},setSelectedLocationInfo:function(t,e){t.selectedLocationInfo=e},setRecentLocations:function(t,e){t.recentLocations=e},addLocationRecentLocations:function(t,e){t.recentLocations.unshift(e)},removeLocationRecentLocations:function(t,e){t.recentLocations.splice(t.recentLocations.indexOf(e),1)}}}),u=l,d=n("/ocq"),h=n("mvHQ"),p=n.n(h),m=n("dDoS"),g={name:"SearchPanel",data:function(){return{locationInput:"",searchResult:[]}},watch:{locationInput:function(t){this.locationInput=t,this.locationInput.length<2&&(this.searchResult=[])}},methods:{getLocationSearchResult:function(t){var e=this;t.length>=2?this.$http.get("https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/search/?query="+t).then(function(t){t.data.sort(function(t,e){return t.title.length-e.title.length}),e.searchResult=t.data}):this.searchResult=[]},emptyInput:function(){this.locationInput="",this.searchResult=[]},selectLocation:function(t){var e=this;this.emptyInput(),this.$store.commit("setSelectedLocation",t),this.$http.get("https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/"+this.$store.getters.getSelectedLocation.woeid).then(function(t){e.$store.commit("setSelectedLocationInfo",t.data),e.$store.getters.getRecentLocations.some(function(e){return e.woeid===t.data.woeid})?(e.$store.commit("removeLocationRecentLocations",e.$store.getters.getRecentLocations.find(function(e){return e.woeid===t.data.woeid})),e.$store.commit("addLocationRecentLocations",{fullTitle:t.data.title+", "+t.data.parent.title,woeid:t.data.woeid})):e.$store.commit("addLocationRecentLocations",{fullTitle:t.data.title+", "+t.data.parent.title,woeid:t.data.woeid}),localStorage.setItem("recentLocations",p()(e.$store.getters.getRecentLocations))})}},computed:{showSearchResult:function(){return 0!==this.searchResult.length}},directives:{ClickOutside:n.n(m).a}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.emptyInput,expression:"emptyInput"}],attrs:{id:"search-panel"}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.locationInput,expression:"locationInput",modifiers:{trim:!0}}],staticClass:"search-input",attrs:{type:"text",placeholder:"Search location by city name"},domProps:{value:t.locationInput},on:{keyup:function(e){return t.getLocationSearchResult(t.locationInput)},input:function(e){e.target.composing||(t.locationInput=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showSearchResult,expression:"showSearchResult"}],staticClass:"list-search-result"},t._l(t.searchResult,function(e){return n("div",{key:e.woeid,staticClass:"element-list",on:{click:function(n){return t.selectLocation(e)}}},[t._v("\n      "+t._s(e.title)+"\n    ")])}),0)])},staticRenderFns:[]},L=n("VU/8")(g,f,!1,null,null,null).exports,v=n("u4Bf"),w={name:"RecentLocationPanel",data:function(){return{newRecentLocations:[]}},components:{Draggable:n.n(v).a},mounted:function(){if(localStorage.getItem("recentLocations"))try{this.$store.commit("setRecentLocations",JSON.parse(localStorage.getItem("recentLocations")))}catch(t){localStorage.removeItem("recentLocations")}},methods:{removeLocationRecentLocations:function(t){window.event.cancelBubble=!0,window.event.stopPropagation&&window.event.stopPropagation(),t.woeid==this.$store.getters.getSelectedLocation.woeid&&(this.$store.commit("setSelectedLocationInfo",[]),this.$store.commit("setSelectedLocation",[])),this.$store.commit("removeLocationRecentLocations",t),localStorage.setItem("recentLocations",p()(this.$store.getters.getRecentLocations))},selectLocation:function(t){var e=this;this.$store.commit("setSelectedLocation",t),this.$http.get("https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/"+this.$store.getters.getSelectedLocation.woeid).then(function(n){console.log(n.data),e.$store.commit("setSelectedLocationInfo",n.data),e.$store.getters.getRecentLocations.some(function(t){return t.woeid===n.data.woeid})&&(e.$store.commit("removeLocationRecentLocations",t),e.$store.commit("addLocationRecentLocations",{fullTitle:n.data.title+", "+n.data.parent.title,woeid:n.data.woeid})),localStorage.setItem("recentLocations",p()(e.$store.getters.getRecentLocations))})},updateRecentLocations:function(){localStorage.setItem("recentLocations",p()(this.$store.getters.getRecentLocations))}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fieldset",{attrs:{id:"recent-location-panel"}},[n("legend",[t._v("Recent searches")]),t._v(" "),n("div",{attrs:{id:"list-location"}},[n("Draggable",{staticClass:"list-group",attrs:{list:t.$store.getters.getRecentLocations,"ghost-class":"ghost"},on:{update:t.updateRecentLocations}},t._l(t.$store.getters.getRecentLocations,function(e){return t.$store.getters.getRecentLocations.length?n("div",{key:e.woeid,staticClass:"element-location",on:{click:function(n){return t.selectLocation(e)}}},[t._v("\n        "+t._s(e.fullTitle)+"\n        "),n("div",{staticStyle:{padding:"0","text-align":"center",float:"right"},on:{click:function(n){return t.removeLocationRecentLocations(e)}}},[n("i",{staticClass:"fa fa-trash fa-lg"})])]):t._e()}),0)],1)])},staticRenderFns:[]},R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fieldset",{staticClass:"fieldset",attrs:{id:"weather-display-panel"}},[n("legend",[t._v("Weather forecast of "+t._s(t.selectedLocationFullTitle))]),t._v(" "),n("div",{staticClass:"table"},[n("div",{staticClass:"columns is-multiline"},t._l(t.forecasts,function(e){return n("div",{staticClass:"column",attrs:{id:"forecast-element"}},[n("h4",[t._v(t._s(e.applicable_date))]),t._v(" "),n("img",{attrs:{id:"element-icon",src:t.getForecastIcon(e)}}),t._v(" "),n("h5",[t._v(t._s(e.weather_state_name))]),t._v(" "),n("p",[t._v("\n          Predictability: "+t._s(t.getForecastPredictability(e))+"% "),n("br"),t._v("\n          Wind speed: "+t._s(t.getForecastWindSpeed(e))+" mph "),n("br"),t._v("\n          Min. temperature: "+t._s(t.getForecastMinTemp(e))+" °C "),n("br"),t._v("\n          Max. temperature: "+t._s(t.getForecastMaxTemp(e))+" °C "),n("br"),t._v("\n          Humidity: "+t._s(t.getForecastHumidity(e))+"%\n        ")])])}),0)])])},staticRenderFns:[]},S={name:"Home",components:{SearchPanel:L,RecentLocationPanel:n("VU/8")(w,_,!1,null,null,null).exports,WeatherDisplayPanel:n("VU/8")({name:"WeatherDisplayPanel",methods:{getForecastIcon:function(t){return"https://www.metaweather.com/static/img/weather/png/64/"+t.weather_state_abbr+".png"},getForecastPredictability:function(t){return t.predictability},getForecastWindSpeed:function(t){return t.wind_speed.toFixed(1)},getForecastMinTemp:function(t){return t.min_temp.toFixed(1)},getForecastMaxTemp:function(t){return t.max_temp.toFixed(1)},getForecastHumidity:function(t){return t.humidity}},computed:{selectedLocationFullTitle:function(){return 0!==this.$store.getters.getSelectedLocationInfo.length?this.$store.getters.getSelectedLocationInfo.title+", "+this.$store.getters.getSelectedLocationInfo.parent.title:null},forecasts:function(){return 0!==this.$store.getters.getSelectedLocationInfo.length?this.$store.getters.getSelectedLocationInfo.consolidated_weather:null}}},R,!1,null,null,null).exports},created:function(){if(localStorage.getItem("recentLocations"))try{this.$store.commit("setRecentLocations",JSON.parse(localStorage.getItem("recentLocations")))}catch(t){localStorage.removeItem("recentLocations")}},computed:{isLocationSelected:function(){return 0!==this.$store.getters.getSelectedLocation.length&&0!==this.$store.getters.getSelectedLocationInfo.length},widthLeftUpperPanel:function(){return 0!==this.$store.getters.getRecentLocations.length?"50%":"100%"},heightUpperPanel:function(){return 0!==this.$store.getters.getSelectedLocationInfo.length?"50%":"80%"},heightLowerPanel:function(){return 0!==this.$store.getters.getSelectedLocationInfo.length?"50%":"20%"}}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"home"}},[e("div",{style:{height:this.heightUpperPanel},attrs:{id:"upper-panel"}},[e("div",{style:{width:this.widthLeftUpperPanel},attrs:{id:"left-upper-panel"}},[e("SearchPanel")],1),this._v(" "),0!==this.$store.getters.getRecentLocations.length?e("div",{attrs:{id:"right-upper-panel"}},[e("RecentLocationPanel")],1):this._e()]),this._v(" "),e("div",{style:{height:this.heightLowerPanel},attrs:{id:"lower-panel"}},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("WeatherDisplayPanel",{directives:[{name:"show",rawName:"v-show",value:0!==this.$store.getters.getSelectedLocationInfo.length,expression:"$store.getters.getSelectedLocationInfo.length !== 0"}]})],1)],1)])},staticRenderFns:[]},I=n("VU/8")(S,$,!1,null,null,null).exports;o.a.use(d.a);var y=new d.a({mode:"history",routes:[{path:"*",redirect:"/home"},{path:"/home",name:"Home",component:I}]}),F=n("mtWM"),P=n.n(F);o.a.prototype.$http=P.a,o.a.config.productionTip=!1,new o.a({el:"#app",router:y,store:u,render:function(t){return t(c)}})},Vp6e:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8d23de7448787dad0983.js.map